!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function o(s,c,u){function f(t,n){if(!c[t]){if(!s[t]){var e="function"==typeof require&&require;if(!n&&e)return e(t,!0);if(a)return a(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=c[t]={t:{}};s[t][0].call(r.t,function(n){return f(s[t][1][n]||n)},r,r.t,o,s,c,u)}return c[t].t}for(var a="function"==typeof require&&require,n=0;n<u.length;n++)f(u[n]);return f}({1:[function(i,r,f){(function(n){"use strict";f.s=!0;var o=t(i("./ChainWebSocket")),s=t(i("./GrapheneApi")),c=t(i("./ChainConfig"));function t(n){return n&&n.s?n:{default:n}}if(n)n.u="";else;var u=!1,e=(h.h=function(n){this.l=n,inst&&inst.h(n)},h.v=function(n){u=n},h.reset=function(n,t,e,i,r){var o=0<arguments.length&&void 0!==n?n:"ws://localhost:8090",s=t,c=2<arguments.length&&void 0!==e?e:4e3,u=this,f=i,a=r;return this.close().then(function(){return inst=new h,inst.h(u.l),inst&&s&&inst.connect(o,c,f,a),inst})},h.p=function(n,t,e,i,r){var o=0<arguments.length&&void 0!==n?n:"ws://localhost:8090",s=t,c=2<arguments.length&&void 0!==e?e:4e3,u=i,f=r;return inst||(inst=new h,inst.h(this.l)),inst&&s&&inst.connect(o,c,u),f&&(inst._=f),inst},h.m=function(){return this.p().T},h.close=function(){return inst?new Promise(function(n){inst.close().then(function(){inst=null,n()})}):Promise.resolve()},h.prototype.connect=function(t,n,e){var i=this,r=2<arguments.length&&void 0!==e?e:{k:!1,g:!1};if(this.url=t,"undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&t.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.S&&(this.S.l=null,this.S.C=null,this.S.P=null,this.S.O=null),this.S=new o.default(t,this.l,n,u,function(n){i.W&&!n&&i.W.exec("get_objects",[["2.1.0"]]).catch(function(){})}),this.A=this.S.I("","").then(function(){i.W=new s.default(i.S,"database"),i.q=new s.default(i.S,"network_broadcast"),i.H=new s.default(i.S,"history"),r.g&&(i.U=new s.default(i.S,"orders")),r.k&&(i.X=new s.default(i.S,"crypto"));var n=i.W.init().then(function(){return i.W.exec("get_chain_id",[]).then(function(n){return i.T=n,c.default.j(n)})});i.S.O=function(){i.S&&i.S.I("","").then(function(){i.W.init().then(function(){i.l&&i.l("reconnect")}),i.q.init(),i.H.init(),r.g&&i.U.init(),r.k&&i.X.init()})},i.S.P=function(){i.close().then(function(){i._&&i._()})};var t=[n,i.q.init(),i.H.init()];return r.g&&t.push(i.U.init()),r.k&&t.push(i.X.init()),Promise.all(t)}).catch(function(n){return console.error(t,"Failed to initialize with error",n&&n.message),i.close().then(function(){throw n})})},h.prototype.close=function(){var n=this;return this.S&&1===this.S.F.readyState?this.S.close().then(function(){n.S=null}):(this.S=null,Promise.resolve())},h.prototype.M=function(){return this.W},h.prototype.N=function(){return this.q},h.prototype.B=function(){return this.H},h.prototype.D=function(){return this.X},h.prototype.G=function(){return this.U},h.prototype.h=function(n){this.l=n},h);function h(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h)}e.db=new Proxy(e,{get:function(n,t){return function(){return n.p().M().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),e.J=new Proxy(e,{get:function(n,t){return function(){return n.p().N().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),e.history=new Proxy(e,{get:function(n,t){return function(){return n.p().B().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),e.crypto=new Proxy(e,{get:function(n,t){return function(){return n.p().D().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),e.R=new Proxy(e,{get:function(n,t){return function(){return n.p().G().exec(t,[].concat(Array.prototype.slice.call(arguments)))}}}),f.default=e,r.t=f.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{L:2,V:3,K:4}],2:[function(n,t,e){(function(n){"use strict";e.s=!0;var s=void 0,c={Y:n.$.Z||"HX"};s={nn:"CORE",Y:"HX",tn:15,en:86400,in:86400,rn:{on:{nn:"BTS",Y:"BTS",T:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},sn:{nn:"MUSE",Y:"MUSE",T:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},cn:{nn:"TEST",Y:"TEST",T:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},un:{nn:"GOV",Y:"FEW",T:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"}},j:function(n){var t,e,i=void 0,r=void 0,o=void 0;for(i=0,t=(e=Object.keys(s.rn)).length;i<t;i++)if(o=e[i],(r=s.rn[o]).T===n)return s.fn=o,r.Y&&(s.Y=r.Y,c.Y=r.Y),{fn:o,J:r};s.fn||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){s.nn="CORE",s.Y="HX",c.Y="HX",s.tn=15,s.en=86400,console.log("Chain config reset")},an:function(n){var t=0<arguments.length&&void 0!==n?n:"HX";s.Y=t,c.Y=t}},e.default=s,t.t=e.default}).call(this,n("_process"))},{hn:6}],3:[function(e,i,r){(function(n){"use strict";r.s=!0;var s=void 0;s="undefined"!=typeof WebSocket||n.$.ln?WebSocket:e("ws");var t=(c.prototype.call=function(n){var e=this;if(1!==this.F.readyState)return Promise.reject(new Error("websocket state error:"+this.F.readyState));var t=n[1];if(this.dn+=1,"set_subscribe_callback"!==t&&"subscribe_to_market"!==t&&"broadcast_transaction_with_callback"!==t&&"set_pending_transaction_callback"!==t&&"set_block_applied_callback"!==t||(this.wn[this.dn]={vn:n[2][0]},n[2][0]=this.dn),"unsubscribe_from_market"===t||"unsubscribe_from_accounts"===t){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var r in this.wn)if(this.wn[r].vn===i){this.bn[this.dn]=r;break}}var o={method:"call",pn:n};return o.id=this.dn,this._n=5,new Promise(function(n,t){e.mn[e.dn]={time:new Date,resolve:n,reject:t},e.F.send(JSON.stringify(o))})},c.prototype.listener=function(n){var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.pn[0]),t?e=this.wn[n.id].vn:(e=this.mn[n.id],this.yn=n.id),e&&!t?(n.error?e.reject(n.error):e.resolve(n.result),delete this.mn[n.id],this.bn[n.id]&&(delete this.wn[this.bn[n.id]],delete this.bn[n.id])):e&&t?e(n.pn[1]):console.log("Warning: unknown websocket response: ",n)},c.prototype.I=function(n,t){var e=this;return this.Tn.then(function(){return e.call([1,"login",[n,t]])})},c.prototype.close=function(){var t=this;return new Promise(function(n){if(clearInterval(t.kn),t.kn=void 0,t.En=function(){n(),t.En=null},!t.F)return console.log("Websocket already cleared",t),n();t.F.terminate?t.F.terminate():t.F.close(),3===t.F.readyState&&n()})},c);function c(i,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3,r=this,o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.url=i,this.l=n,this.gn=setTimeout(function(){if(r.Sn){var n=r.Sn;r.Sn=null,r.close(),n(new Error("Connection attempt timed out after "+t/1e3+"s"))}},t),this.Sn=null,this.O=null,this.closed=!1,this._n=5,this.xn=10,this.C=e,this.Tn=new Promise(function(n,t){r.Sn=t;var e=function(n){return n||"undefined"==typeof WebSocket||"undefined"==typeof document?s:WebSocket}(o);try{r.F=new e(i)}catch(n){r.F={readyState:3,close:function(){}},t(new Error("Invalid url",i," closed"))}r.F.onopen=function(){clearTimeout(r.gn),r.l&&r.l("open"),r.O&&r.O(),r.kn=setInterval(function(){if(r.xn--,0==r.xn)return console.error(r.url+" connection is dead, terminating ws"),void r.close();r._n--,0==r._n&&(r.C&&r.C(r.closed),r._n=5)},5e3),r.Sn=null,n()},r.F.onerror=function(n){r.kn&&(clearInterval(r.kn),r.kn=void 0),clearTimeout(r.gn),r.l&&r.l("error"),r.Sn&&r.Sn(n)},r.F.onmessage=function(n){r.xn=10,r.listener(JSON.parse(n.data))},r.F.onclose=function(){r.closed=!0,r.kn&&(clearInterval(r.kn),r.kn=void 0);for(var n=new Error("connection closed"),t=r.yn+1;t<=r.dn;t+=1)r.mn[t].reject(n);r.l&&r.l("closed"),r.En&&r.En(),r.P&&r.P()}}),this.dn=0,this.yn=0,this.mn={},this.wn={},this.bn={}}r.default=t,i.t=r.default}).call(this,e("_process"))},{hn:6,F:5}],4:[function(n,t,e){"use strict";e.s=!0;var i=(r.prototype.init=function(){var t=this;return this.S.call([1,this.Cn,[]]).then(function(n){return t.Pn=n,t})},r.prototype.exec=function(n,t){return this.S.call([this.Pn,n,t]).catch(function(n){throw n})},r);function r(n,t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.S=n,this.Cn=t}e.default=i,t.t=e.default},{}],5:[function(){},{}],6:[function(n,t){var e,i,r=t.t={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(n){e=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(n){i=s}}();var u,f=[],a=!1,h=-1;function l(){a&&u&&(a=!1,u.length?f=u.concat(f):h=-1,f.length&&d())}function d(){if(!a){var n=c(l);a=!0;for(var t=f.length;t;){for(u=f,f=[];++h<t;)u&&u[h].On();h=-1,t=f.length}u=null,a=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(n){try{return i.call(null,t)}catch(n){return i.call(this,t)}}}(n)}}function w(n,t){this.Wn=n,this.An=t}function v(){}r.In=function(n){var t=new Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];f.push(new w(n,t)),1!==f.length||a||c(d)},w.prototype.On=function(){this.Wn.apply(null,this.An)},r.title="browser",r.ln=!0,r.$={},r.qn=[],r.version="",r.Hn={},r.Un=v,r.addListener=v,r.Xn=v,r.jn=v,r.removeListener=v,r.Fn=v,r.Mn=v,r.Nn=v,r.Bn=v,r.Dn=function(){return[]},r.Gn=function(){throw new Error("process.binding is not supported")},r.Jn=function(){return"/"},r.Rn=function(){throw new Error("process.chdir is not supported")},r.zn=function(){return 0}},{}]},{},[1])(1)});